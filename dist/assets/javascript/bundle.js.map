{"version":3,"sources":["node_modules/browser-pack/_prelude.js","../sources/javascript/index.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var dom = {}\n    dom.body = document.querySelector('body')\n\n//chapter page\nif (dom.body.querySelector('.scene')) {\n  dom.scene               = dom.body.querySelectorAll('.scene')\n  dom.timeline_point      = dom.body.querySelectorAll('.nav--timeline--link')\n  dom.timeline_bar        = dom.body.querySelector('.nav--timeline--bar--full')\n  dom.btn_menu            = dom.body.querySelector('.nav--menu')\n  dom.btn_menu_close      = dom.body.querySelector('.popin--close')\n  dom.menu_popin          = dom.body.querySelector('.popin')\n\n  //next scene function\n  if (localStorage.getItem('current_chapter') == null) {\n    localStorage.setItem('current_chapter', '1')\n  }\n  var current_chapter = localStorage.getItem('current_chapter');\n  var current_scene = 0\n\n  var next_scene = ()=>\n  {\n    if (current_scene < dom.scene.length - 1)\n    {\n      current_scene++\n      dom.scene[current_scene].style.display = \"block\"\n      setTimeout( ()=>\n      {\n        dom.scene[current_scene].classList.add('scene--active')\n        dom.timeline_point[current_scene].classList.add('nav--timeline--link--active')\n        dom.timeline_bar.style.transform = 'scaleX(' + (current_scene * dom.scene.length) / 20 + ')'\n        setTimeout( ()=>\n        {\n          dom.scene[current_scene - 1].style.display = \"none\"\n        }, 300)\n      }, 10)\n    }\n    else if (current_chapter < 5)\n    {\n      current_chapter++\n      localStorage.setItem('current_chapter', current_chapter)\n      $.ajax({\n          type: \"GET\",\n          url: \"./chapters/chapter\" + current_chapter + \".html\",\n          processData: false,\n          crossDomain: true,\n          cache: true,\n          success: function (result, responseData) { $(\"body\").html(result); },\n          error: function (responseData, textStatus, errorThrown) { alert('AJAX failed'); },\n      });\n    }\n  }\n\n  //previous scene function\n  var previous_scene = ()=>\n  {\n    if (current_scene > 0)\n    {\n      dom.scene[current_scene].classList.remove('scene--active')\n      dom.timeline_point[current_scene].classList.remove('nav--timeline--link--active')\n      current_scene--\n      dom.timeline_bar.style.transform = 'scaleX(' + (current_scene * dom.scene.length) / 20 + ')'\n      setTimeout( ()=>\n      {\n        dom.scene[current_scene].style.display = \"block\"\n        setTimeout( ()=>\n        {\n          dom.scene[current_scene + 1].style.display = \"none\"\n        }, 300)\n      }, 10)\n    }\n    else if (current_chapter > 1)\n    {\n      current_chapter--\n      localStorage.setItem('current_chapter', current_chapter)\n      $.ajax({\n          type: \"GET\",\n          url: \"./chapters/chapter\" + current_chapter + \".html\",\n          processData: false,\n          crossDomain: true,\n          cache: true,\n          success: function (result, responseData) { $(\"body\").html(result); },\n          error: function (responseData, textStatus, errorThrown) { alert('AJAX failed'); },\n      });\n    }\n  }\n\n  //key control\n  document.addEventListener('keyup', (e)=>\n  {\n    if (e.keyCode == 39) {\n      next_scene()\n      e.preventDefault();\n    }\n    if (e.keyCode == 37) {\n      previous_scene()\n      e.preventDefault();\n    }\n  })\n\n  //click control\n  for (let i = 0; i < dom.timeline_point.length; i++) {\n    dom.timeline_point[i].addEventListener('click', (e)=>\n    {\n      if (current_scene > i) {\n        dom.scene[current_scene].classList.remove('scene--active');\n        dom.timeline_point[current_scene].classList.remove('nav--timeline--link--active');\n        current_scene = i\n        dom.scene[current_scene].classList.add('scene--active');\n        dom.timeline_point[current_scene].classList.add('nav--timeline--link--active');\n        dom.timeline_bar.style.transform = 'scaleX(' + (current_scene * dom.scene.length) / 20 + ')'\n      }\n      if (current_scene < i) {\n        current_scene = i\n        dom.scene[current_scene].classList.add('scene--active');\n        dom.timeline_point[current_scene].classList.add('nav--timeline--link--active');\n        dom.timeline_bar.style.transform = 'scaleX(' + (current_scene * dom.scene.length) / 20 + ')'\n      }\n      e.preventDefault();\n    })\n  }\n\n  //chapter menu\n  dom.btn_menu.addEventListener('click', (e)=>\n  {\n    dom.menu_popin.style.display = 'block'\n    setTimeout( ()=>\n    {\n      dom.menu_popin.classList.add('popin--active')\n    }, 10)\n    e.preventDefault();\n  })\n  dom.btn_menu_close.addEventListener('click', (e)=>\n  {\n    dom.menu_popin.classList.remove('popin--active')\n    setTimeout( ()=>\n    {\n      dom.menu_popin.style.display = 'none'\n    }, 300)\n    e.preventDefault();\n  })\n\n  //scroll control Lethargy\n}\n\n//home page\nif (dom.body.querySelector('.mainHeader')) {\n  dom.main_header  = dom.body.querySelector('.mainHeader--content')\n  dom.main_header_front  = dom.body.querySelector('.mainHeader--content--front')\n\n  //mouse paralax\n  let paralax = ()=>\n  {\n    window.addEventListener('mousemove', (e)=>\n    {\n      let ratio_x = (Math.round((e.clientX * 100) / window.innerWidth)) - 50\n      let ratio_y = (Math.round((e.clientY * 100) / window.innerWidth)) - 50\n      dom.main_header.style.transform = 'translate(' + ratio_x * 0.1 + 'px, ' + ratio_y * 0.1 + 'px)'\n      dom.main_header_front.style.transform = 'translate(' + ratio_x * -0.3 + 'px, ' + ratio_y * -0.3 + 'px)'\n    })\n  }\n  paralax()\n}\n\n//Sound design\nfunction sound(src){\n  var sound = new Audio(src);\n  sound.autoplay = true;\n}\n\n//ajax transition\n$(document).ready(function()\n{\n  $(\".ajax--btn\").mouseover(function(){\n    sound('../assets/sounds/gun_reload.mp3');\n  });\n  $(\".ajax--btn\").on(\"click\", function()\n  {\n    sound('../assets/sounds/gun_shot.mp3');\n    var urlPageName = $(this).attr(\"href\");\n    $.ajax({\n        type: \"GET\",\n        url: \"./\" + urlPageName,\n        processData: false,\n        crossDomain: true,\n        cache: true,\n        success: function (result, responseData) { $(\"body\").html(result); },\n        error: function (responseData, textStatus, errorThrown) { alert('AJAX failed'); },\n    });\n    return false;\n  });\n});\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi9zb3VyY2VzL2phdmFzY3JpcHQvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQUksTUFBTSxFQUFWO0FBQ0ksSUFBSSxJQUFKLEdBQVcsU0FBUyxhQUFULENBQXVCLE1BQXZCLENBQVg7O0FBRUo7QUFDQSxJQUFJLElBQUksSUFBSixDQUFTLGFBQVQsQ0FBdUIsUUFBdkIsQ0FBSixFQUFzQztBQUNwQyxNQUFJLEtBQUosR0FBMEIsSUFBSSxJQUFKLENBQVMsZ0JBQVQsQ0FBMEIsUUFBMUIsQ0FBMUI7QUFDQSxNQUFJLGNBQUosR0FBMEIsSUFBSSxJQUFKLENBQVMsZ0JBQVQsQ0FBMEIsc0JBQTFCLENBQTFCO0FBQ0EsTUFBSSxZQUFKLEdBQTBCLElBQUksSUFBSixDQUFTLGFBQVQsQ0FBdUIsMkJBQXZCLENBQTFCO0FBQ0EsTUFBSSxRQUFKLEdBQTBCLElBQUksSUFBSixDQUFTLGFBQVQsQ0FBdUIsWUFBdkIsQ0FBMUI7QUFDQSxNQUFJLGNBQUosR0FBMEIsSUFBSSxJQUFKLENBQVMsYUFBVCxDQUF1QixlQUF2QixDQUExQjtBQUNBLE1BQUksVUFBSixHQUEwQixJQUFJLElBQUosQ0FBUyxhQUFULENBQXVCLFFBQXZCLENBQTFCOztBQUVBO0FBQ0EsTUFBSSxhQUFhLE9BQWIsQ0FBcUIsaUJBQXJCLEtBQTJDLElBQS9DLEVBQXFEO0FBQ25ELGlCQUFhLE9BQWIsQ0FBcUIsaUJBQXJCLEVBQXdDLEdBQXhDO0FBQ0Q7QUFDRCxNQUFJLGtCQUFrQixhQUFhLE9BQWIsQ0FBcUIsaUJBQXJCLENBQXRCO0FBQ0EsTUFBSSxnQkFBZ0IsQ0FBcEI7O0FBRUEsTUFBSSxhQUFhLFNBQWIsVUFBYSxHQUNqQjtBQUNFLFFBQUksZ0JBQWdCLElBQUksS0FBSixDQUFVLE1BQVYsR0FBbUIsQ0FBdkMsRUFDQTtBQUNFO0FBQ0EsVUFBSSxLQUFKLENBQVUsYUFB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V0FBcEMsRUFBaUQ7QUFBRSxjQUFNLGFBQU47QUFBdUI7QUFQOUUsS0FBUDtBQVNBLFdBQU8sS0FBUDtBQUNELEdBZEQ7QUFlRCxDQXBCRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgZG9tID0ge31cbiAgICBkb20uYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKVxuXG4vL2NoYXB0ZXIgcGFnZVxuaWYgKGRvbS5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5zY2VuZScpKSB7XG4gIGRvbS5zY2VuZSAgICAgICAgICAgICAgID0gZG9tLmJvZHkucXVlcnlTZWxlY3RvckFsbCgnLnNjZW5lJylcbiAgZG9tLnRpbWVsaW5lX3BvaW50ICAgICAgPSBkb20uYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcubmF2LS10aW1lbGluZS0tbGluaycpXG4gIGRvbS50aW1lbGluZV9iYXIgICAgICAgID0gZG9tLmJvZHkucXVlcnlTZWxlY3RvcignLm5hdi0tdGltZWxpbmUtLWJhci0tZnVsbCcpXG4gIGRvbS5idG5fbWVudSAgICAgICAgICAgID0gZG9tLmJvZHkucXVlcnlTZWxlY3RvcignLm5hdi0tbWVudScpXG4gIGRvbS5idG5fbWVudV9jbG9zZSAgICAgID0gZG9tLmJvZHkucXVlcnlTZWxlY3RvcignLnBvcGluLS1jbG9zZScpXG4gIGRvbS5tZW51X3BvcGluICAgICAgICAgID0gZG9tLmJvZHkucXVlcnlTZWxlY3RvcignLnBvcGluJylcblxuICAvL25leHQgc2NlbmUgZnVuY3Rpb25cbiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50X2NoYXB0ZXInKSA9PSBudWxsKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRfY2hhcHRlcicsICcxJylcbiAgfVxuICB2YXIgY3VycmVudF9jaGFwdGVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRfY2hhcHRlcicpO1xuICB2YXIgY3VycmVudF9zY2VuZSA9IDBcblxuICB2YXIgbmV4dF9zY2VuZSA9ICgpPT5cbiAge1xuICAgIGlmIChjdXJyZW50X3NjZW5lIDwgZG9tLnNjZW5lLmxlbmd0aCAtIDEpXG4gICAge1xuICAgICAgY3VycmVudF9zY2VuZSsrXG4gICAgICBkb20uc2NlbmVbY3VycmVudF9zY2VuZV0uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxuICAgICAgc2V0VGltZW91dCggKCk9PlxuICAgICAge1xuICAgICAgICBkb20uc2NlbmVbY3VycmVudF9zY2VuZV0uY2xhc3NMaXN0LmFkZCgnc2NlbmUtLWFjdGl2ZScpXG4gICAgICAgIGRvbS50aW1lbGluZV9wb2ludFtjdXJyZW50X3NjZW5lXS5jbGFzc0xpc3QuYWRkKCduYXYtLXRpbWVsaW5lLS1saW5rLS1hY3RpdmUnKVxuICAgICAgICBkb20udGltZWxpbmVfYmFyLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZVgoJyArIChjdXJyZW50X3NjZW5lICogZG9tLnNjZW5lLmxlbmd0aCkgLyAyMCArICcpJ1xuICAgICAgICBzZXRUaW1lb3V0KCAoKT0+XG4gICAgICAgIHtcbiAgICAgICAgICBkb20uc2NlbmVbY3VycmVudF9zY2VuZSAtIDFdLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgICAgICB9LCAzMDApXG4gICAgICB9LCAxMClcbiAgICB9XG4gICAgZWxzZSBpZiAoY3VycmVudF9jaGFwdGVyIDwgNSlcbiAgICB7XG4gICAgICBjdXJyZW50X2NoYXB0ZXIrK1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRfY2hhcHRlcicsIGN1cnJlbnRfY2hhcHRlcilcbiAgICAgICQuYWpheCh7XG4gICAgICAgICAgdHlwZTogXCJHRVRcIixcbiAgICAgICAgICB1cmw6IFwiLi9jaGFwdGVycy9jaGFwdGVyXCIgKyBjdXJyZW50X2NoYXB0ZXIgKyBcIi5odG1sXCIsXG4gICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLFxuICAgICAgICAgIGNyb3NzRG9tYWluOiB0cnVlLFxuICAgICAgICAgIGNhY2hlOiB0cnVlLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQsIHJlc3BvbnNlRGF0YSkgeyAkKFwiYm9keVwiKS5odG1sKHJlc3VsdCk7IH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZURhdGEsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7IGFsZXJ0KCdBSkFYIGZhaWxlZCcpOyB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy9wcmV2aW91cyBzY2VuZSBmdW5jdGlvblxuICB2YXIgcHJldmlvdXNfc2NlbmUgPSAoKT0+XG4gIHtcbiAgICBpZiAoY3VycmVudF9zY2VuZSA+IDApXG4gICAge1xuICAgICAgZG9tLnNjZW5lW2N1cnJlbnRfc2NlbmVdLmNsYXNzTGlzdC5yZW1vdmUoJ3NjZW5lLS1hY3RpdmUnKVxuICAgICAgZG9tLnRpbWVsaW5lX3BvaW50W2N1cnJlbnRfc2NlbmVdLmNsYXNzTGlzdC5yZW1vdmUoJ25hdi0tdGltZWxpbmUtLWxpbmstLWFjdGl2ZScpXG4gICAgICBjdXJyZW50X3NjZW5lLS1cbiAgICAgIGRvbS50aW1lbGluZV9iYXIuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlWCgnICsgKGN1cnJlbnRfc2NlbmUgKiBkb20uc2NlbmUubGVuZ3RoKSAvIDIwICsgJyknXG4gICAgICBzZXRUaW1lb3V0KCAoKT0+XG4gICAgICB7XG4gICAgICAgIGRvbS5zY2VuZVtjdXJyZW50X3NjZW5lXS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgICAgIHNldFRpbWVvdXQoICgpPT5cbiAgICAgICAge1xuICAgICAgICAgIGRvbS5zY2VuZVtjdXJyZW50X3NjZW5lICsgMV0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgICAgIH0sIDMwMClcbiAgICAgIH0sIDEwKVxuICAgIH1cbiAgICBlbHNlIGlmIChjdXJyZW50X2NoYXB0ZXIgPiAxKVxuICAgIHtcbiAgICAgIGN1cnJlbnRfY2hhcHRlci0tXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudF9jaGFwdGVyJywgY3VycmVudF9jaGFwdGVyKVxuICAgICAgJC5hamF4KHtcbiAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICAgIHVybDogXCIuL2NoYXB0ZXJzL2NoYXB0ZXJcIiArIGN1cnJlbnRfY2hhcHRlciArIFwiLmh0bWxcIixcbiAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsXG4gICAgICAgICAgY3Jvc3NEb21haW46IHRydWUsXG4gICAgICAgICAgY2FjaGU6IHRydWUsXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCwgcmVzcG9uc2VEYXRhKSB7ICQoXCJib2R5XCIpLmh0bWwocmVzdWx0KTsgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlc3BvbnNlRGF0YSwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHsgYWxlcnQoJ0FKQVggZmFpbGVkJyk7IH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvL2tleSBjb250cm9sXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGUpPT5cbiAge1xuICAgIGlmIChlLmtleUNvZGUgPT0gMzkpIHtcbiAgICAgIG5leHRfc2NlbmUoKVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICBpZiAoZS5rZXlDb2RlID09IDM3KSB7XG4gICAgICBwcmV2aW91c19zY2VuZSgpXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9KVxuXG4gIC8vY2xpY2sgY29udHJvbFxuICBmb3IgKGxldCBpID0gMDsgaSA8IGRvbS50aW1lbGluZV9wb2ludC5sZW5ndGg7IGkrKykge1xuICAgIGRvbS50aW1lbGluZV9wb2ludFtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+XG4gICAge1xuICAgICAgaWYgKGN1cnJlbnRfc2NlbmUgPiBpKSB7XG4gICAgICAgIGRvbS5zY2VuZVtjdXJyZW50X3NjZW5lXS5jbGFzc0xpc3QucmVtb3ZlKCdzY2VuZS0tYWN0aXZlJyk7XG4gICAgICAgIGRvbS50aW1lbGluZV9wb2ludFtjdXJyZW50X3NjZW5lXS5jbGFzc0xpc3QucmVtb3ZlKCduYXYtLXRpbWVsaW5lLS1saW5rLS1hY3RpdmUnKTtcbiAgICAgICAgY3VycmVudF9zY2VuZSA9IGlcbiAgICAgICAgZG9tLnNjZW5lW2N1cnJlbnRfc2NlbmVdLmNsYXNzTGlzdC5hZGQoJ3NjZW5lLS1hY3RpdmUnKTtcbiAgICAgICAgZG9tLnRpbWVsaW5lX3BvaW50W2N1cnJlbnRfc2NlbmVdLmNsYXNzTGlzdC5hZGQoJ25hdi0tdGltZWxpbmUtLWxpbmstLWFjdGl2ZScpO1xuICAgICAgICBkb20udGltZWxpbmVfYmFyLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZVgoJyArIChjdXJyZW50X3NjZW5lICogZG9tLnNjZW5lLmxlbmd0aCkgLyAyMCArICcpJ1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnRfc2NlbmUgPCBpKSB7XG4gICAgICAgIGN1cnJlbnRfc2NlbmUgPSBpXG4gICAgICAgIGRvbS5zY2VuZVtjdXJyZW50X3NjZW5lXS5jbGFzc0xpc3QuYWRkKCdzY2VuZS0tYWN0aXZlJyk7XG4gICAgICAgIGRvbS50aW1lbGluZV9wb2ludFtjdXJyZW50X3NjZW5lXS5jbGFzc0xpc3QuYWRkKCduYXYtLXRpbWVsaW5lLS1saW5rLS1hY3RpdmUnKTtcbiAgICAgICAgZG9tLnRpbWVsaW5lX2Jhci5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGVYKCcgKyAoY3VycmVudF9zY2VuZSAqIGRvbS5zY2VuZS5sZW5ndGgpIC8gMjAgKyAnKSdcbiAgICAgIH1cbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KVxuICB9XG5cbiAgLy9jaGFwdGVyIG1lbnVcbiAgZG9tLmJ0bl9tZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT5cbiAge1xuICAgIGRvbS5tZW51X3BvcGluLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgc2V0VGltZW91dCggKCk9PlxuICAgIHtcbiAgICAgIGRvbS5tZW51X3BvcGluLmNsYXNzTGlzdC5hZGQoJ3BvcGluLS1hY3RpdmUnKVxuICAgIH0sIDEwKVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfSlcbiAgZG9tLmJ0bl9tZW51X2Nsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT5cbiAge1xuICAgIGRvbS5tZW51X3BvcGluLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcGluLS1hY3RpdmUnKVxuICAgIHNldFRpbWVvdXQoICgpPT5cbiAgICB7XG4gICAgICBkb20ubWVudV9wb3Bpbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgfSwgMzAwKVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfSlcblxuICAvL3Njcm9sbCBjb250cm9sIExldGhhcmd5XG59XG5cbi8vaG9tZSBwYWdlXG5pZiAoZG9tLmJvZHkucXVlcnlTZWxlY3RvcignLm1haW5IZWFkZXInKSkge1xuICBkb20ubWFpbl9oZWFkZXIgID0gZG9tLmJvZHkucXVlcnlTZWxlY3RvcignLm1haW5IZWFkZXItLWNvbnRlbnQnKVxuICBkb20ubWFpbl9oZWFkZXJfZnJvbnQgID0gZG9tLmJvZHkucXVlcnlTZWxlY3RvcignLm1haW5IZWFkZXItLWNvbnRlbnQtLWZyb250JylcblxuICAvL21vdXNlIHBhcmFsYXhcbiAgbGV0IHBhcmFsYXggPSAoKT0+XG4gIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGUpPT5cbiAgICB7XG4gICAgICBsZXQgcmF0aW9feCA9IChNYXRoLnJvdW5kKChlLmNsaWVudFggKiAxMDApIC8gd2luZG93LmlubmVyV2lkdGgpKSAtIDUwXG4gICAgICBsZXQgcmF0aW9feSA9IChNYXRoLnJvdW5kKChlLmNsaWVudFkgKiAxMDApIC8gd2luZG93LmlubmVyV2lkdGgpKSAtIDUwXG4gICAgICBkb20ubWFpbl9oZWFkZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgnICsgcmF0aW9feCAqIDAuMSArICdweCwgJyArIHJhdGlvX3kgKiAwLjEgKyAncHgpJ1xuICAgICAgZG9tLm1haW5faGVhZGVyX2Zyb250LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoJyArIHJhdGlvX3ggKiAtMC4zICsgJ3B4LCAnICsgcmF0aW9feSAqIC0wLjMgKyAncHgpJ1xuICAgIH0pXG4gIH1cbiAgcGFyYWxheCgpXG59XG5cbi8vU291bmQgZGVzaWduXG5mdW5jdGlvbiBzb3VuZChzcmMpe1xuICB2YXIgc291bmQgPSBuZXcgQXVkaW8oc3JjKTtcbiAgc291bmQuYXV0b3BsYXkgPSB0cnVlO1xufVxuXG4vL2FqYXggdHJhbnNpdGlvblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKVxue1xuICAkKFwiLmFqYXgtLWJ0blwiKS5tb3VzZW92ZXIoZnVuY3Rpb24oKXtcbiAgICBzb3VuZCgnLi4vYXNzZXRzL3NvdW5kcy9ndW5fcmVsb2FkLm1wMycpO1xuICB9KTtcbiAgJChcIi5hamF4LS1idG5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpXG4gIHtcbiAgICBzb3VuZCgnLi4vYXNzZXRzL3NvdW5kcy9ndW5fc2hvdC5tcDMnKTtcbiAgICB2YXIgdXJsUGFnZU5hbWUgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpO1xuICAgICQuYWpheCh7XG4gICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgIHVybDogXCIuL1wiICsgdXJsUGFnZU5hbWUsXG4gICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSxcbiAgICAgICAgY3Jvc3NEb21haW46IHRydWUsXG4gICAgICAgIGNhY2hlOiB0cnVlLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0LCByZXNwb25zZURhdGEpIHsgJChcImJvZHlcIikuaHRtbChyZXN1bHQpOyB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlc3BvbnNlRGF0YSwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHsgYWxlcnQoJ0FKQVggZmFpbGVkJyk7IH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcbn0pO1xuIl19"}